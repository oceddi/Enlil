<html>
   <head>
      <script type="text/javascript" src="../lib/enlil.js"></script>
      <script type="text/javascript" src="../lib/sheets.js"></script>
      <script type="text/javascript" src="../lib/path.js"></script>
   </head>
   <body>
   <h1>Enlil Test Page</h1>

   <div id='version'></div> 
   <div id='fps'></div> 
   <div id='div1'></div>
   <div id='div2'></div>

   </body>

   <script type="text/javascript">
      var ver   = document.getElementById('version');
      var fps   = document.getElementById('fps');
      var mon1  = document.getElementById('monster1');
      var mon2  = document.getElementById('monster2');
      var count = 0;
      var h = 0;
      var v = 0;
      var step = 10;
      var track = ['right', 'down', 'left', 'up'];

      var advance = function() {
         var loc1 = Paths.interpolate(loopIfrit);
         var loc2 = Paths.interpolate(loopBahamut);

         Enlil.drawActorGroup('monIfrit',   loc1.gid, count % 4, loc1.x, loc1.y);
         Enlil.drawActorGroup('monBahamut', loc2.gid, count % 4, loc2.x, loc2.y);

         Enlil.tick();
         count++;
         fps.innerHTML = 'FPS: ' + Enlil.fps;

      };

      Paths.add('box',
      {
         waypoints:
         [
            /* h, v */
            [   0, 300 ],
            [ 860, 300 ],
            [ 860, 660 ],
            [   0, 660 ]
         ]
      });

      var loopIfrit = Paths.instantiate('box',
         {
            repeats:   true,
            closeloop: true,
            intervals:
            [
               20,
               2,
               16,
               2
            ],
            groups:
            [
               'right',
               'down',
               'left',
               'up'
            ]
         }
      );

      var loopBahamut = Paths.instantiate('box',
         {
            repeats:   true,
            closeloop: true,
            intervals:
            [
               10,
               1,
               8,
               1
            ],
            groups:
            [
               'right',
               'down',
               'left',
               'up'
            ]
         }
      );

      Sheets.add('ifrit',   
      {
         resource:'ifrit.png',
         cwidth:80,
         cheight:80,
         groups:
         {
            'down'  : [  0,  3 ],
            'left'  : [  4,  7 ],
            'right' : [  8, 11 ],
            'up'    : [ 12, 15 ]
         }
      });

      Sheets.add('bahamut',
      {
         resource:'bahamut.png',
         cwidth:96,
         cheight:96,
         groups:
         {
            'down'  : [  0,  3 ],
            'left'  : [  4,  7 ],
            'right' : [  8, 11 ],
            'up'    : [ 12, 15 ]
         }
      });

      ver.innerHTML = 'Version: ' + Enlil.version; 

      Enlil.createActor({
         name    : 'monIfrit',
         sheetid : 'ifrit',
         div     : 'div1'
      });
      Enlil.createActor({
         name    : 'monBahamut',
         sheetid : 'bahamut',
         div     : 'div2'
      });
      
      window.onload = function() {
         Enlil.startFPS();
         Enlil.registerRunLoop(advance);
         Enlil.start();
      }
   </script>
</html>
