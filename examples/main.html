<html>
   <head>
      <script type="text/javascript" src="../lib/enlil.js"></script>
      <script type="text/javascript" src="../lib/sheets.js"></script>
   </head>
   <body>
   <h1>Enlil Test Page</h1>

   <div id='version'></div> 
   <div id='fps'></div> 
   <div id='div1'></div>
   <div id='div2'></div>

   </body>

   <script type="text/javascript">
      var ver   = document.getElementById('version');
      var fps   = document.getElementById('fps');
      var mon1  = document.getElementById('monster1');
      var mon2  = document.getElementById('monster2');
      var count = 0;
      var h = 0;
      var v = 0;
      var step = 10;
      var track = ['right', 'down', 'left', 'up'];

      var advance = function() {
         var dir = track[parseInt(count/16)];

         Enlil.drawActorGroup('monIfrit',   dir, count % 4, h, v + 300);
         Enlil.drawActorGroup('monBahamut', dir, count % 4, h, v + 400);

         Enlil.tick();
         count++;

         switch(dir)
         {
            case 'down':
               v = v + step;
               break;

            case 'left':
               h = h - step;
               break;

            case 'right':
               h = h + step;
               break;

            case 'up':
               v = v - step;
               break;
         }

         if(count>63)
         { 
            count=0;
         }
         fps.innerHTML = 'FPS: ' + Enlil.fps;

      };

      Sheets.add('ifrit',   
      {
         resource:'ifrit.png',
         cwidth:80,
         cheight:80,
         groups:
         {
            'down'  : [  0,  3 ],
            'left'  : [  4,  7 ],
            'right' : [  8, 11 ],
            'up'    : [ 12, 15 ]
         }
      });

      Sheets.add('bahamut',
      {
         resource:'bahamut.png',
         cwidth:96,
         cheight:96,
         groups:
         {
            'down'  : [  0,  3 ],
            'left'  : [  4,  7 ],
            'right' : [  8, 11 ],
            'up'    : [ 12, 15 ]
         }
      });

      ver.innerHTML = 'Version: ' + Enlil.version; 

      Enlil.createActor({
         name    : 'monIfrit',
         sheetid : 'ifrit',
         div     : 'div1'
      });
      Enlil.createActor({
         name    : 'monBahamut',
         sheetid : 'bahamut',
         div     : 'div2'
      });
      
      window.onload = function() {
         Enlil.startFPS();
         window.setInterval(advance, 100);
      }
   </script>
</html>
